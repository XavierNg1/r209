



                                                           C. KADJO MAMI
                                                            E. N'GUESSAN
                                                        Telecom Bretagne
                                                       February 28, 2019


     Group 17: c2w protocol specification proposal (Binary Version)
                     draft-ietf-xml2rfc-template-05

Abstract

   Ce document presente la specification du protocole de communication
   utilise au sein de l'application c2w (Chat While Watching); Ce
   protocole permettra a tous les utilisateurs du meme type de salon
   (principal ou de visionnement d'une video) de s'echanger des
   messages.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Fonctionnement  . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  Type de Paquet  . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Format des Paquets  . . . . . . . . . . . . . . . . . . . . .   4
     4.1.  Acquitement . . . . . . . . . . . . . . . . . . . . . . .   5
     4.2.  Erreur de sequence  . . . . . . . . . . . . . . . . . . .   6
     4.3.  Demande de connexion  . . . . . . . . . . . . . . . . . .   6
     4.4.  Erreur de connexion . . . . . . . . . . . . . . . . . . .   8
     4.5.  Connexion Reussie . . . . . . . . . . . . . . . . . . . .   8
     4.6.  Envoie liste des films  . . . . . . . . . . . . . . . . .   9
     4.7.  Envoie Liste des users  . . . . . . . . . . . . . . . . .  11
     4.8.  Avertissement Inactivite  . . . . . . . . . . . . . . . .  12
     4.9.  Avertissement SPAM  . . . . . . . . . . . . . . . . . . .  13
     4.10. Demande Acces film  . . . . . . . . . . . . . . . . . . .  14
     4.11. Envoie Message de Chat  . . . . . . . . . . . . . . . . .  14
     4.12. Quitter la MainRoom . . . . . . . . . . . . . . . . . . .  15
     4.13. Quitter un film . . . . . . . . . . . . . . . . . . . . .  15
     4.14. Message de deconnexion  . . . . . . . . . . . . . . . . .  16
   5.  Fiabilite . . . . . . . . . . . . . . . . . . . . . . . . . .  16
   6.  Exemple de scenario . . . . . . . . . . . . . . . . . . . . .  16
     6.1.  Scenario sans erreur 1: Regarder un film  . . . . . . . .  16
     6.2.  Scenario sans erreur 2: Chat dans une salle . . . . . . .  18
     6.3.  Scenario 3: Utilisateur inactif Dans la salle principale   19
     6.4.  Scenario sans erreur 4: Envoie de SPAM  . . . . . . . . .  20
     6.5.  Scenario avec erreur : Quitter l'application  . . . . . .  23
   7.  Conclusion  . . . . . . . . . . . . . . . . . . . . . . . . .  25
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  25





KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 1]

                            Abbreviated Title              February 2019


1.  Introduction

   Dans le cadre de l'application c2w : Chat While Watching, ce document
   decrit la specification du protocole de communication utilise pour la
   mise en place de ladite application.  Cette application permet a un
   utilisateur, apres s'etre connecte, d'acceder a un certains nombres
   de videos, de pouvoir les regarder d'une part et, d'autre part, de
   pouvoir echanger des messages avec les utilisateurs se trouvant dans
   le meme salon.

   Le serveur communiquera avec les utilisateurs aussi bien en utilisant
   le protocole de transport TCP que le protocole UDP.  Les messages
   seront envoyes sous le format binaire.

   Dans la suite du document nous specifierons le fonctionnement du
   protocole, les types de messages envoyes, le format des differents
   messages et donnerons differents examples de scenarii pouvant arriver
   dans l'execution du protocole.

2.  Fonctionnement

   On suppose prealablement qu'un client possede necessairement un
   couple (adresse IP, port), distinct de tous les autres utilisateurs.
   Pour pouvoir utiliser l'application c2w, le client doit se connecter
   au serveur en entrant son pseudo choisi et le nom (ou l'adresse IP)
   du serveur.  Les noms d'utilisateurs seront en caracteres
   alphanumeriques, sans caracteres speciaux, et leur taille devra etre
   compris entre 4 et 32 caracteres.

   Il est a noter que le nom d'utilisateur peut etre refuse pour
   d'autres raisons: il peut etre deja utilise par un autre client
   connecte ou il peut faire partie de la liste des noms utilisateur
   bannis car juges offensant.

   Deux cas sont a analyser, le cas ou le serveur etablie la connexion
   et le cas ou il la refuse

   Premier cas: La connexion est etablie

   Il y a etablissement de connexion si et seulement si deux (2)
   conditions sont respectees:

   Le serveur n'est pas sature : Leur serveur est sature si il atteint
   le nombre maximal d'utilisateurs qu'il peut supporter en l'occurence
   128. si ce n'est pas le cas la connexion peut etre etablie.






KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 2]

                            Abbreviated Title              February 2019


   Le nom d'utilisateur est correct: Il respecte les conditions de
   taille, il est alphanumerique sans caracteres speciaux, il ne fait
   partie ni des pseudos existants ni des pseudos bannis.

   Une fois ces conditions satisfaites, le client est connecte.  Il
   accede au salon principal et recoit la liste de tous les utilisateurs
   connectes (pseudos, presence) et la liste des videos disponibles
   (nom, adresse IP, port).  La liste des utilisateurs recue par les
   autres utilisateurs est aussi actualisee.  Pour changer de salon, le
   client envoie au serveur le nom, le port et l'adresse IP de la video
   qu'il souhaite visionner.  Il se retrouve alors dans le salon de la
   video correspondant et recoit en meme temps la liste des utilisateurs
   regardant la meme video.  Ces derniers sont informes eux aussi de la
   venue d'un nouvel utilisateur.  Le client peut decider de quitter le
   salon principal ou un salon de visionnage a tout moment, en envoyant
   les messages correspondants.

   Deuxieme cas : La connexion est refusee

   La connexion echoue si l'une des deux conditions enoncees
   precedemment n'est pas respectee.  Le client recoit alors un message
   d'erreur et est invite a ressaisir ses acces.

3.  Type de Paquet

   Describe the packet format and the headers.  For example, if you have
   a binary header, you can use a figure like the following example
   (where we have used the generic name "Field" for most of the fields,
   you should use the names corresponding to your solution):






















KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 3]

                            Abbreviated Title              February 2019


     +------+--------------------------+-------------------------------+
     | code |       TypeDePaquet       |      Sens de Transmission     |
     +------+--------------------------+-------------------------------+
     | 0000 |       Acquitement        |     Client <-----> Server     |
     | 0001 |   Demande de connexion   |     Client x-----> Server     |
     | 0010 |   Erreur de connexion    |     Client <-----x Server     |
     | 0011 |     Connexion Reussie    |     Client <-----x Server     |
     | 0100 |  Envoie liste des films  |     Client <-----x Server     |
     | 0101 |  Envoie liste de users   |     Client <-----x Server     |
     | 0110 | Avertissemnt Inactivite  |     Client <-----x Server     |
     | 0111 |    Avertissemnt SPAM     |     Client <-----x Server     |
     | 1000 |    Demande acces film    |     Client x-----> Server     |
     | 1001 |    Erreur de sequence    |     Client <-----> Server     |
     | 1010 |  Envoie message de Chat  |     Client <-----> Server     |
     | 1011 |   Quitter la Main room   |     Client x-----> Server     |
     | 1100 | Quitter un salon de film |     Client x-----> Server     |
     | 1101 |  Message de deconnexion  |     Client <-----x Server     |
     |______|__________________________|_______________________________|



                                 Figure 1

   Sens de Transmission

   1.  Client x-----> Server: Indique une communication du client vers
       le server

   2.  Client <-----x Server: Indique une communication du server vers
       le client

   3.  Client <-----> Server: Indique la possibilite d'avoir le cas 1.
       ou 2.

4.  Format des Paquets

   Dans la suite nous allons decrire les differents type de paquet
   presente ci-dessus.  Nous presenterons la cause de ces differrents
   "evenements", et les consequence immediates sur le systeme.  La
   totalite des paquets partagent au minimun les 3 champs presente sur
   la figure 2.  Nous eviterons alors les repetitions dans la suite.










KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 4]

                            Abbreviated Title              February 2019


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 2

   Code (4 bits)

           Code sur 4 bits il permet d'identifier les 14 differents
           types de paquets.

   Sequence (12 bits)

           Numero de Permet d'identifier le type de paquet recu.  Code
           sur 4 bits il permet de d'envoyer 16 types de paquets
           differents.

   Taille (16 bits)

           C'est la taille en bit de l'ensemble du message (c'est a dire
           de tous les champs du paquet reunis).

4.1.  Acquitement

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 3

   Code (4 bits)

           Code = 0000 informant le client qu'il s'agit d'un
           acquitement.

   Sequence (12 bits)

           Le munero de se



KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 5]

                            Abbreviated Title              February 2019


   Taille (16 bits)

           C'est la taille en bit de l'ensemble du message (c'est a dire
           de tous les champs du paquet reunis).

4.2.  Erreur de sequence

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 4

   Code (4 bits)

           Code sur 4 bits il permet d'identifier les 14 differents
           types de paquets.

   Sequence (12 bits)

           Numero de Permet d'identifier le type de paquet recu.  Code
           sur 4 bits il permet de d'envoyer 16 types de paquets
           differents.

   Taille (16 bits)

           C'est la taille en bit de l'ensemble du message (c'est a dire
           de tous les champs du paquet reunis).

   SequenceAttendue (12 bits)

           Permet d'identifier le type de paquet recu.  Code sur 4 bits
           il permet de d'envoyer 16 types de paquets differents.

4.3.  Demande de connexion

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.






KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 6]

                            Abbreviated Title              February 2019


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                             Temps                             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       .                            UserName                           .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 5

   Code (4 bits)

           Code sur 4 bits il permet d'identifier les 14 differents
           types de paquets.

   Sequence (12 bits)

           Numero de Permet d'identifier le type de paquet recu.  Code
           sur 4 bits il permet de d'envoyer 16 types de paquets
           differents.

   Taille (16 bits)

           C'est la taille en bit de l'ensemble du message (c'est a dire
           de tous les champs du paquet reunis).

   Temps (32 bits)

           Temps envoye par le client a chaque interaction volantaire
           avec le server: Demande de connection, envoie de message Chat
           , Quitter un film, Demande Acces film.  Ce temps nous permet
           de mesurer le temps d'inactivite d'un client.  Comme dit plus
           haut un client inactif pendant 15 min se fera systematiquent
           deconnecter lorsqu'il est dans la Main Room, les clients dans
           les salles de film n'etant pas concerner.  Cela devrait
           permettre l'acces au service a d'autre client.

   Username (256 bits)

           Ce champs contient le Username du client.  Tout les
           caracteres UTF-8 sont acceptes.  Le Username du client est au
           maximun 256 bits une fois le UserName sous forme binaire.





KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 7]

                            Abbreviated Title              February 2019


4.4.  Erreur de connexion

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       .                        MessageErreur                          .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 6

   Code (4 bits)

           Code sur 4 bits il permet d'identifier les 14 differents
           types de paquets.

   Sequence (12 bits)

           Numero de Permet d'identifier le type de paquet recu.  Code
           sur 4 bits il permet de d'envoyer 16 types de paquets
           differents.

   Taille (16 bits)

           C'est la taille en bit de l'ensemble du message (c'est a dire
           de tous les champs du paquet reunis).

   MessageErreur (1024 bits)

           Ce champ contient un message a afficher lors d'une erreur de
           connexion.  Le contenu du message permettra a l'utilisateur
           de savoir avec exactitude La cause l'erreur.  Le message est
           encode en UTF-8.  Suivant l'erreur sur le username le client
           saura que sont username est deja utilise , trop long ou n'est
           pas accepte (Hitler, etc)

4.5.  Connexion Reussie

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.




KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 8]

                            Abbreviated Title              February 2019


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    IdUser   |
       +-+-+-+-+-+-+-+

                                 Figure 7

   Code (4 bits)

           Code sur 4 bits il permet d'identifier les 14 differents
           types de paquets.

   Sequence (12 bits)

           Numero de Permet d'identifier le type de paquet recu.  Code
           sur 4 bits il permet de d'envoyer 16 types de paquets
           differents.

   Taille (16 bits)

           C'est la taille en bit de l'ensemble du message (c'est a dire
           de tous les champs du paquet reunis).

   IdUser (7 bits)

           Ce champ contient entre 0 et 127.  IdUser est attribue a
           chaque client lors de sa connexion et doit permertre son
           identification client sans l'utilisation de son username afin
           de reduire la taille des paquets de communication.

4.6.  Envoie liste des films

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.














KADJO MAMI & N'GUESSAN  Expires September 1, 2019               [Page 9]

                            Abbreviated Title              February 2019


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                           AdresseIP                           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |             NumPort           |                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
       |                            NomFilm                            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                           AdresseIP                           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |             NumPort           |                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
       |                            NomFilm                            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .                                                               .
       .                                                               .
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 8

   Code (4 bits)

           Code sur 4 bits il permet d'identifier les 14 differents
           types de paquets.

   Sequence (12 bits)

           Numero de Permet d'identifier le type de paquet recu.  Code
           sur 4 bits il permet de d'envoyer 16 types de paquets
           differents.

   Taille (16 bits)

           C'est la taille en bit de l'ensemble du message (c'est a dire
           de tous les champs du paquet reunis).

   Adresse IP (32 bits)

           Permet d'identifier le type de paquet recu.  Code sur 4 bits
           il permet de d'envoyer 16 types de paquets differents.

   NumPort (16 bits)

           Permet d'identifier le type de paquet recu.  Code sur 4 bits
           il permet de d'envoyer 16 types de paquets differents.



KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 10]

                            Abbreviated Title              February 2019


   NomFilm (256 bits)

           Ce champ contient Le nom d'un film.  Tous les carateres UTF-8
           doivent etre accepter et le message codes sur 256 bits Le
           message doit s'afficher parmis les messages de chat mais etre
           vu Le champ Salle etant code sur 4 bits l'application doit
           dispose d'au maximun 15 films

4.7.  Envoie Liste des users

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    IdUser   | Salle |                                         |
       +-+-+-+-+-+-+-+-+-+-+-+      UserName                           .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    IdUser   | Salle |                                         |
       +-+-+-+-+-+-+-+-+-+-+-+      UserName                           .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .                                                               .
       .                                                               .
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 9

   Code (4 bits)

           Code sur 4 bits il permet d'identifier les 14 differents
           types de paquets.

   Sequence (12 bits)

           Numero de Permet d'identifier le type de paquet recu.  Code
           sur 4 bits il permet de d'envoyer 16 types de paquets
           differents.

   Taille (16 bits)





KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 11]

                            Abbreviated Title              February 2019


           C'est la taille en bit de l'ensemble du message (c'est a dire
           de tous les champs du paquet reunis).

   IdUser (7 bits)

           Ce champ contient entre 0 et 127.  IdUser est attribue a
           chaque client lors de sa connexion et doit permertre son
           identification client sans l'utilisation de son username afin
           de reduire la taille des paquets de communication.

   Salle (4 bits)

           Ce champ code sur 4 bits contient le numero d'une Salle.
           0000 peut etre le numero pour designer la Main Room.  Chaque
           Films est aussi represente par sa salle (numero de salle
           :xxxx) Le champ salle doit permetre de localiser un client a
           tout moment.  En d'autre terme chaque client est lier a une
           salle qui permet au server de connaitre les desitinataires
           des messages envoye: MainRoom (Salle=0000) une salle de film
           (Salle !=0000)

   Username (256 bits)
           Ce champs contient le Username d'un client.  Tout les
           caracteres UTF-8 sont acceptes.  Le Username du client est
           code sur 256 bits et doit respecter certaines contraintes
           lors de la connexion d'un client.

           1.  Le username doit pouvoir etre code sur 256 bits

           2.  Le Username choisit ne doit pas etre deja utilise

           3.  Le username ne doit pas figure parmis une liste de
               username juges offenssant Exemple : Hitler, Merde,...

4.8.  Avertissement Inactivite

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.













KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 12]

                            Abbreviated Title              February 2019


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       .                     AvertissementInactivite                   .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+




                                 Figure 10

   AvertissementInactivite (1024 bits)

           Ce champ contient un message avertissement le client qu'il
           sera deconnecte dans 1 minute parce qu'il est inactif dans la
           MainRoom.  Tous les carateres UTF-8 doivent etre accepter et
           le message codes sur 1024 bits Le message doit s'afficher
           parmis les messages de chat mais etre vu uniquement par le
           client concerne.

4.9.  Avertissement SPAM

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       .                       AvertissementSPAM                       .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 11

   AvertissementSPAM (1024 bits)

           Ce champ contient un message avertissement le client qu'il
           sera deconnecte dans 1 minute pour envoi repete de message (2
           messages par seconde).  Tous les carateres UTF-8 doivent etre



KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 13]

                            Abbreviated Title              February 2019


           accepter et le message codes sur 1024 bits Le message doit
           s'afficher parmis les messages de chat mais etre vu
           uniquement par le client concerne

4.10.  Demande Acces film

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                             Temps                             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Salle |                                                       |
       +-+-+-+-+                    NomFilm                            .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+



                                 Figure 12

   Salle (4 bits)

           Ce champ code sur 4 bits contient le numero de salle de la
           Main Room.  En d'autre terme de la localisation du client au
           momment de la demande d'acces, soit Salle=0000 Tout comme
           pour l'envoi d'un message de Chat, ce numero de salle doit
           etre utiliser pour l'envoie de la liste des users actualise
           au clients situes dans la Main Room (salle 0000).

   NomFilm (256 bits)

           Ce champ contient Le nom d'un film.  Tous les carateres UTF-8
           doivent etre accepter et le message codes sur 256 bits Le
           message doit s'afficher parmis les messages de chat mais etre
           vu Le champ Salle etant code sur 4 bits l'application doit
           dispose d'au maximun 15 films.

4.11.  Envoie Message de Chat

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.




KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 14]

                            Abbreviated Title              February 2019


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                             Temps                             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    IdUser   | Salle |                                         |
       +-+-+-+-+-+-+-+-+-+-+-+      Message                            .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 13

   Message (Taille variable)

           Ce champ contient un message de chat envoye par un client en
           destination des clients presents dans la meme salle que lui.
           Tous les carateres UTF-8 doivent etre accepter et le taille
           du message doit etre variable.  Le message doit s'afficher
           uniquement chez les clients de cette salle.

4.12.  Quitter la MainRoom

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 14

4.13.  Quitter un film

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.









KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 15]

                            Abbreviated Title              February 2019


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Salle |
       +-+-+-+-+

                                 Figure 15

4.14.  Message de deconnexion

   By default 3 levels of nesting show in table of contents but that can
   be adjusted with the value of the "tocdepth" processing instruction.


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Code  |        Sequence       |            Taille             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       .                    NotificationDeconnexion                    .
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 16

   NotificationDeconnexion (1024 bits)

           Ce champ contient un message avertissement le client qu'il
           sera deconnecte dans 1 minute pour envoi repete de message (2
           messages par seconde).  Tous les carateres UTF-8 doivent etre
           accepter et le message codes sur 1024 bits Le message doit
           s'afficher parmis les messages de chat mais etre vu
           uniquement par le client concerne

5.  Fiabilite

6.  Exemple de scenario

6.1.  Scenario sans erreur 1: Regarder un film

   Dans ce scenario, nous allons expliciter la suite de messages envoyee
   entre un client et le serveur lorsque l'utilisateur veut regarder un
   film sur la plateforme.  Nous irons de la connexion au service
   jusqu'a l'acces au film.




KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 16]

                            Abbreviated Title              February 2019


                                           (salle               (salle
                                         principale)              001)
 Client A                Serveur           Client B             Client C
   |                       |                   |                    |
   |      Demande de       |                   |                    |
   |      connexion        |                   |                    |
   |---------------------->|                   |                    |
   |  (Le client demande   |                   |                    |
   |  l'acces au service)  |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |    Acquittement       |                   |                    |
   |<----------------------|                   |                    |
   |  (Le serveur confirme |                   |                    |
   |   avoir recu)         |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |  Connexion reussie    |                   |                    |
   |<-------------- -------|                   |                    |
   | (Le serveur connecte  |                   |                    |
   |       le client)      |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |   Envoi liste des     |                   |                    |
   |        films          |                   |                    |
   |<----------------------|                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |    Acquittement       |                   |                    |
   |---------------------->|                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |                       |     Envoi liste   |                    |
   |   Envoi liste des     |  des utilisateurs |                    |
   |     utilisateurs      |------------------>|                    |
   |<----------------------|(le serveur actua- |                    |
   |                       |lise la liste des  |                    |
   |                       | clients connectes)|                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |    Acquittement       |                   |                    |
   |---------------------->|                   |                    |
   |                       |   Acquittement    |                    |
   |                       |<------------------|                    |



KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 17]

                            Abbreviated Title              February 2019


   |                       |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |  Demande acces film   |                   |                    |
   |---------------------->|                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |    Acquittement       |                   |                    |
   |<----------------------|                   |                    |
   |                       |                   |                    |
   |    Envoi liste        |                   |                    |
   | des utilisateurs      |                   |                    |
   |<----------------------|                   |                    |
   |     (Utilisateurs     |                   |                    |
   | visionnant le meme    |                   |                    |
   |   film [salle @001])  |  Envoi liste des  |                    |
   |                       |    utilisateurs   |                    |
   |                       |------------------>|                    |
   |                       | (le serveur actua-|                    |
   |                       | lise la liste des |                    |
   |                       | clients connectes)|                    |
   |                       |                   |                    |
   |                       | Envoi liste des   |                    |
   |                       |    utilisateurs   |                    |
   |                       |--------------------------------------->|
   |    Acquittement       |                   |                    |
   |---------------------->|                   |                    |
   |                       |   Acquittement    |                    |
   |                       |<------------------|                    |
   |                       |                   |                    |
   |                       |                   |  Acquittement      |
   |                       |                   |<-------------------|
   |                       |                   |                    |




6.2.  Scenario sans erreur 2: Chat dans une salle

   Ce scenario decrit la suite de message envoyes dans le cas d'un envoi
   de messages dans une meme salle.










KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 18]

                            Abbreviated Title              February 2019


 Client A                Serveur           Client B             Client C
   |                       |                   |                    |
   |      Envoi de         |                   |                    |
   |  message : "salut!"   |                   |                    |
   |---------------------->|                   |                    |
   |  (Le client envoie    |                   |                    |
   | un message dans la    |                   |                    |
   |       salle)          |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |    Acquittement       |                   |                    |
   |<----------------------|                   |                    |
   |                       |                   |                    |
   |                       |     Envoi de      |                    |
   |                       | message : "salut!"|                    |
   |                       |------------------>|                    |
   |                       |                   |                    |
   |                       |     Envoi de      |                    |
   |                       | message : "salut!"|                    |
   |                       |--------------------------------------->|
   |      Envoi de         |                   |                    |
   |  message : "salut!"   |                   |                    |
   |<----------------------|                   |                    |
   |    Acquittement       |                   |                    |
   |---------------------->|                   |                    |
   |                       |   Acquittement    |                    |
   |                       |<------------------|                    |
   |                       |                   |                    |
   |                       |                   |  Acquittement      |
   |                       |                   |<-------------------|


6.3.  Scenario 3: Utilisateur inactif Dans la salle principale

   Ce scenario decrit la suite de messages envoyes dans le cas ou un
   utilisateur est inactif dans la salle principale.














KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 19]

                            Abbreviated Title              February 2019


   MSG 1 from toto to titi

   etc

   You can also use a figure like this:

   Client A                                Serveur           Client B
     | =====  Processus de connexion  =====   |                 |
     | =====     (cf. Scenario 1)     =====   |                 |
     | ==   (Temps d'inaction = 0 mn)   ==    |                 |
     .                                        .                 .
     .                                        .                 .
     | ==   (Temps d'inaction = 14 mn)   ==   |                 |
     |                                        |                 |
     |       Avertissement Inactivite         |                 |
     |<---------------------------------------|                 |
     |  (Le serveur previent l'utilisateur)   |                 |
     |                                        |                 |
     |             Acquittement               |                 |
     |--------------------------------------->|                 |
     .                                        .                 .
     | ==   (Temps d'inaction = 15 mn)   ==   |                 |
     |                                        |                 |
     |        Message de deconnexion          |                 |
     |<---------------------------------------|                 |
     |                                        | Envoi liste des |
     |                                        |  utilisateurs   |
     |                                        |---------------->|
     |             Acquittement               |                 |
     |--------------------------------------->|                 |
     |                                        |                 |
     |                                        |   Acquittement  |
     |                                        |<----------------|
     |                                        |                 |

6.4.  Scenario sans erreur 4: Envoie de SPAM

   Ce scenario decrit l'ensemble des messages echanges lorsque
   l'utilisateur envoie des messages a repetition dans le chat dans le
   but de nuire (SPAM).  Le serveur va donc le deconnecter.

 Client A                Serveur           Client B             Client C
   |                       |                   |                    |
   |      Envoi de         |                   |                    |
   |  message : "SPAM!"    |                   |                    |
   |---------------------->|                   |                    |
   |  (Le client envoie    |                   |                    |
   | un message dans la    |                   |                    |



KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 20]

                            Abbreviated Title              February 2019


   |       salle)          |                   |                    |
   |                       |                   |                    |
   |     Acquittement      |                   |                    |
   |<----------------------|                   |                    |
   |                       |     Envoi de      |                    |
   |                       | message : "SPAM!" |                    |
   |                       |------------------>|                    |
   |                       |                   |                    |
   |                       |     Envoi de      |                    |
   |                       | message : "SPAM!" |                    |
   |                       |--------------------------------------->|
   |      Envoi de         |                   |                    |
   |  message : "SPAM"     |                   |                    |
   |<----------------------|                   |                    |
   |    Acquittement       |                   |                    |
   |---------------------->|                   |                    |
   |                       |   Acquittement    |                    |
   |                       |<------------------|                    |
   |                       |                   |                    |
   |                       |                   |  Acquittement      |
   |                       |                   |<-------------------|
   |      Envoi de         |                   |                    |
   |  message : "SPAM!"    |                   |                    |
   |---------------------->|                   |                    |
   |     Acquittement      |                   |                    |
   |<----------------------|                   |                    |
   |                       |     Envoi de      |                    |
   |                       | message : "SPAM!" |                    |
   |                       |------------------>|                    |
   |                       |                   |                    |
   |                       |     Envoi de      |                    |
   |                       | message : "SPAM!" |                    |
   |                       |--------------------------------------->|
   |      Envoi de         |                   |                    |
   |  message : "SPAM"     |                   |                    |
   |<----------------------|                   |                    |
   |    Acquittement       |                   |                    |
   |---------------------->|                   |                    |
   |                       |   Acquittement    |                    |
   |                       |<------------------|                    |
   |                       |                   |                    |
   |                       |                   |  Acquittement      |
   |                       |                   |<-------------------|
   |      Envoi de         |                   |                    |
   |  message : "SPAM!"    |                   |                    |
   |---------------------->|                   |                    |
   .                       .                   .                    .
   .                       .                   .                    .



KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 21]

                            Abbreviated Title              February 2019


   .                       .                   .                    .
   |      Envoi de         |                   |                    |
   |  message : "SPAM!"    |                   |                    |
   |---------------------->|                   |                    |
   |                       |                   |                    |
   |     Acquittement      |                   |                    |
   |<----------------------|                   |                    |
   |                       |                   |                    |
   |   Avertissement SPAM  |                   |                    |
   |<----------------------|                   |                    |
   |                       |                   |                    |
   |    Acquittement       |                   |                    |
   |---------------------->|                   |                    |
   |                       |                   |                    |
   |                       |                   |                    |
   |      Envoi de         |                   |                    |
   |  message : "SPAM!"    |                   |                    |
   |---------------------->|                   |                    |
   |                       |                   |                    |
   |     Acquittement      |                   |                    |
   |<----------------------|                   |                    |
   |                       |                   |                    |
   |      Message de       |                   |                    |
   |     deconnexion       |                   |                    |
   |<----------------------|                   |                    |
   | ("Vous allez etre     |                   |                    |
   |   deconnecte pour     |                   |                    |
   |       SPAM")          |  Envoi liste des  |                    |
   |                       |   utilisateurs    |                    |
   |                       |------------------>|                    |
   |                       |                   |                    |
   |                       |  Envoi liste des  |                    |
   |                       |   utilisateurs    |                    |
   |                       |--------------------------------------->|
   |    Acquittement       |                   |                    |
   |---------------------->|                   |                    |
   |                       |   Acquittement    |                    |
   |                       |<------------------|                    |
   |                       |                   |                    |
   |                       |                   |  Acquittement      |
   |                       |                   |<-------------------|










KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 22]

                            Abbreviated Title              February 2019


6.5.  Scenario avec erreur : Quitter l'application

   Dans ce scenario, nous allons simuler la suite de messages envoyes
   lorsque l'utilisateur veut quitter l'application.  Cependant, nous
   ajouterons quelques erreurs qui peuvent arriver dans notre systeme et
   nous montrerons comment nous comptons les gerer.













































KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 23]

                            Abbreviated Title              February 2019


   Client A                                       Serveur
     |                                               |
     |                                               |
     |                                               |
     |       Quitter un salon de film (Seq = 6)      |
     |-----------------------x                       |
     |                                               |
     |                                               |
     |                                               |
     |       Quitter un salon de film (Seq = 6)      |
     |---------------------------------------------->|
     | (Le client, n'ayant pas recu l'acquittement   |
     |  attend 2 secondes et renvoie le meme message |
     | avec le meme numero de sequence au serveur)   |
     |                                               |
     |                                               |
     |               Acquittement                    |
     |                   x---------------------------|
     |     L'acquittement n'a pas atteint le         |
     |                   client)                     |
     |                                               |
     |                                               |
     |       Quitter un salon de film  (Seq = 6)     |
     |---------------------------------------------->|
     | (Le client, n'ayant pas recu l'acquittement   |
     |  encore une fois attend 2 secondes et         |
     |            renvoie le meme message            |
     | avec le meme numero de sequence au serveur)   |
     |                                               |
     |                                               |
     |               Erreur de sequence              |
     |<----------------------------------------------|
     |  (Le serveur signale au client qu'il a deja   |
     |   recu cette sequence, lui signalant ainsi    |
     |      la reception du message precedent.
     |    Le numero de sequence attendu etant        |
     |                le numero 7)                   |
     |                                               |
     |                                               |
     |              Acquittement   (Seq = 7)         |
     |---------------------------------------------->|
     |                                               |
     |         ==== Deconnexion du client ====       |








KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 24]

                            Abbreviated Title              February 2019


7.  Conclusion

   Chat While Watching est une application offrant aux utilisateurs un
   service de chat lorsque ceux-ci selectionnent le film qu'ils veulent
   regarder ou encore pendant le visionnage.  En suivant le protocole
   enonce dans ce document, nous pensons que l'application peut garantir
   ce service de chat tout en gardant un certain confort et une bonne
   fiabilite.

Authors' Addresses

   Claude KADJO MAMI
   Telecom Bretagne
   655, Avenue du Technopole
   Brest, Bretagne  29280
   France

   Email: claude-yrvine-axel.kadjo-mami@imt-atlantique.net


   Eric Xavier N'GUESSAN
   Telecom Bretagne
   655, Avenue du Technopole
   Brest, Bretagne  29280
   France

   Email: eric-xavier.nguessan@imt-atlantique.net
























KADJO MAMI & N'GUESSAN  Expires September 1, 2019              [Page 25]
